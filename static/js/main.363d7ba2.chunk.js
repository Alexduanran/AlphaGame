(this.webpackJsonpalphagame=this.webpackJsonpalphagame||[]).push([[0],{134:function(t,e,i){t.exports={background:"Genetic_background__zkABP",container:"Genetic_container__3BPBj",gameScreen:"Genetic_gameScreen__3qtyt",name:"Genetic_name__vF0vp",text:"Genetic_text__1bC0W",plotScreen:"Genetic_plotScreen__3dRxY"}},135:function(t,e,i){t.exports={background:"Reinforcement_background__1Bv23",container:"Reinforcement_container__3LXxV",gameScreen:"Reinforcement_gameScreen__1ndi4",name:"Reinforcement_name__TAEiF",text:"Reinforcement_text__9Aprn",plotScreen:"Reinforcement_plotScreen__3DOwi"}},136:function(t,e,i){t.exports={background:"Battle_background__2bwgt",container:"Battle_container__3Hpn_",gameScreen:"Battle_gameScreen__1hthJ",name:"Battle_name__EcAiI",text:"Battle_text__34_Jy",plotScreen:"Battle_plotScreen__6ZSH0"}},289:function(t,e,i){t.exports={background:"App_background__3GJc-"}},341:function(t,e,i){},391:function(t,e){},408:function(t,e){},409:function(t,e){},417:function(t,e){},420:function(t,e){},421:function(t,e){},429:function(t,e){},442:function(t,e,i){"use strict";i.r(e);var A=i(18),n=i(10),a=i.n(n),r=i(111),s=i.n(r),o=(i(341),i(289)),l=i.n(o),c=i(6),h=i(68),u=i.n(h),d=i(21),p=i(134),g=i.n(p),f=i(73),b=i(57),v=i(459),m=i(449),y=i(291),x=i(450),j=i(461),_=i(290),w=i(457),O=i(451),S=i(452);var k=function(t){var e=Object(n.useState)(2),i=Object(c.a)(e,2),a=i[0],r=i[1],s=Object(n.useState)([12,6]),o=Object(c.a)(s,2),l=o[0],h=o[1],u=Object(n.useState)(.05),p=Object(c.a)(u,2),g=p[0],f=p[1],b=Object(n.useState)("static"),k=Object(c.a)(b,2),C=k[0],B=k[1],E=Object(n.useState)(50),I=Object(c.a)(E,2),Q=I[0],M=I[1],T=Object(n.useState)(100),G=Object(c.a)(T,2),R=G[0],z=G[1];return Object(A.jsx)("div",{style:{position:"absolute",top:"2.5%",bottom:"0px",left:"0px",right:"0px"},children:Object(A.jsxs)(v.a,{children:[Object(A.jsxs)(v.a.Group,{as:m.a,children:[Object(A.jsx)(v.a.Label,{column:!0,sm:"5",style:{color:"white",left:"4%"},children:"Hidden Layer Architecture"}),Object(A.jsx)(y.a,{style:{right:"4%"},children:Object(A.jsxs)(x.a,{children:[Object(A.jsxs)(x.a.Prepend,{children:[Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet"},onClick:function(){return r(1==a?1:a-1)},children:"-"}),Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet"},onClick:function(){return r(3==a?3:a+1)},children:"+"})]}),Object(d.a)(Array(a)).map((function(t,e){return Object(A.jsx)(_.a,{placeholder:"layer"+(e+1).toString(),defaultValue:l[e],onChange:function(t){var i=l;i[e]=Number(t.target.value),h(i)}},e)})),Object(A.jsx)(x.a.Append,{children:Object(A.jsx)(w.a,{overlay:Object(A.jsx)(O.a,{children:"Enter the number of nodes in each layer"}),children:Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet",cursor:"default"},children:"\u24d8"})})})]})})]}),Object(A.jsxs)(v.a.Group,{as:m.a,children:[Object(A.jsx)(v.a.Label,{column:!0,sm:"5",style:{color:"white",left:"4%"},children:"Mutation Rate"}),Object(A.jsx)(y.a,{style:{right:"4%"},children:Object(A.jsxs)(x.a,{children:[Object(A.jsx)(_.a,{defaultValue:g,onChange:function(t){return f(Number(t.target.value))}}),Object(A.jsx)(x.a.Append,{children:Object(A.jsx)(w.a,{overlay:Object(A.jsx)(O.a,{children:"Enter the number of nodes in each layer"}),children:Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet",cursor:"default"},children:"\u24d8"})})})]})})]}),Object(A.jsxs)(v.a.Group,{as:m.a,children:[Object(A.jsx)(v.a.Label,{column:!0,sm:"5",style:{color:"white",left:"4%"},children:"Mutation Rate Type"}),Object(A.jsx)(y.a,{style:{right:"4%"},children:Object(A.jsxs)(S.a,{children:[Object(A.jsx)(j.a,{style:{backgroundColor:"static"===C?"#6918b4":"blueviolet",borderColor:"blueviolet"},onClick:function(){return B("static")},children:"Static"}),Object(A.jsx)(j.a,{style:{backgroundColor:"decay"===C?"#6918b4":"blueviolet",borderColor:"blueviolet"},onClick:function(){return B("decay")},children:"Decay"})]})}),Object(A.jsx)(y.a,{style:{left:"13.2%"},children:Object(A.jsx)(w.a,{overlay:Object(A.jsxs)(O.a,{children:["Static: Mutation rate stays the same throughout generations ",Object(A.jsx)("br",{}),"Decay: Mutation rate decreases as generation increasesr"]}),children:Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet",cursor:"default"},children:"\u24d8"})})})]}),Object(A.jsxs)(v.a.Group,{as:m.a,children:[Object(A.jsx)(v.a.Label,{column:!0,sm:"5",style:{color:"white",left:"4%"},children:"Number of Parents"}),Object(A.jsx)(y.a,{style:{right:"4%"},children:Object(A.jsxs)(x.a,{children:[Object(A.jsx)(_.a,{defaultValue:Q,onChange:function(t){return M(Number(t.target.value))}}),Object(A.jsx)(x.a.Append,{children:Object(A.jsx)(w.a,{overlay:Object(A.jsx)(O.a,{children:"Enter the number of parents to generate offsprings"}),children:Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet",cursor:"default"},children:"\u24d8"})})})]})})]}),Object(A.jsxs)(v.a.Group,{as:m.a,children:[Object(A.jsx)(v.a.Label,{column:!0,sm:"5",style:{color:"white",left:"4%"},children:"Number of Offsprings"}),Object(A.jsx)(y.a,{style:{right:"4%"},children:Object(A.jsxs)(x.a,{children:[Object(A.jsx)(_.a,{defaultValue:R,onChange:function(t){return z(Number(t.target.value))}}),Object(A.jsx)(x.a.Append,{children:Object(A.jsx)(w.a,{overlay:Object(A.jsx)(O.a,{children:"Enter the number of offsprings to be generated by parents"}),children:Object(A.jsx)(j.a,{style:{backgroundColor:"blueviolet",borderColor:"blueviolet",cursor:"default"},children:"\u24d8"})})})]})})]}),Object(A.jsx)("div",{class:"text-center",children:Object(A.jsx)(j.a,{size:"lg",style:{width:"30%",backgroundColor:"blueviolet",borderColor:"blueviolet"},onClick:function(){t.updateStart(),t.updateSettings(l,g,C,Q,R)},children:"Start"})})]})})},C=i(293);var B=function(t){var e=a.a.useMemo((function(){return[{label:"Average Fitness",data:t.avgFitness},{label:"Max Fitness",data:t.maxFitness}]}),[t.avgFitness,t.maxFitness]),i=a.a.useMemo((function(){return[{primary:!0,type:"linear",position:"bottom",show:t.avgFitness},{type:"linear",position:"left",show:t.maxFitness}]}),[t.avgFitness,t.maxFitness]);return Object(A.jsx)("div",{style:{width:t.dimension[0],height:t.dimension[1],background:"black"},children:Object(A.jsx)(C.Chart,{data:e,axes:i,tooltip:!0,primaryCursor:!0,dark:!0})})},E=i(19),I=i(113),Q=i.n(I),M=i(4),T=i(15),G=i(16);var R=function(){},z=i(101),W=i(102),F=function(t){return 1/(1+z.exp(-t))},D=function(t){return z.tanh(t)},U=function(t){var e,i=[],A=Object(E.a)(t);try{for(A.s();!(e=A.n()).done;){var n=e.value;n>=0?i.push(n):i.push([0])}}catch(a){A.e(a)}finally{A.f()}return i},N=function(t){return t},L=function t(e,i,A){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"uniform";Object(M.a)(this,t),this.feed_forward=function(t){for(var e=t,i=n.layer_nodes.length-1,A=null,a=null,r=null,s=1;s<i;s++)A=n.params["W"+s.toString()],a=n.params["b"+s.toString()],r=z.dot(A,e).add(z.array(a)),e=n.hidden_activation(r.tolist()),n.params["A"+s.toString()]=e;A=n.params["W"+i.toString()],a=n.params["b"+i.toString()],r=z.dot(A,e).add(z.array(a));var o=n.hidden_activation(r.tolist());n.params["A"+i.toString()]=o;for(var l=0;l<o.length;l++)(null===n.out||o[l][0]>n.out)&&(n.out=l);return n.out},this.params={},this.layer_nodes=e,this.hidden_activation=i,this.output_activation=A,this.inputs=null,this.out=null;for(var r=1;r<this.layer_nodes.length;r++){if("uniform"!=a)throw new Error("Implement more options, bro");for(var s=[],o=0;o<this.layer_nodes[r];o++){for(var l=[],c=0;c<this.layer_nodes[r-1];c++)l.push(W.uniform(-1,1)());s.push(l)}var h=[];for(o=0;o<this.layer_nodes[r];o++)h.push([W.uniform(-1,1)()]);this.params["W"+r.toString()]=s,this.params["b"+r.toString()]=h,this.params["A"+r.toString()]=null}},P=function(t){for(var e=[["relu",U],["sigmoid",F],["linear",N],["tanh",D]],i=[],A=0;A<e.length;A++)e[A][0]===t.toLowerCase()&&i.push(e[A][1]);return console.assert(1==i.length),i[0]},Y=function(t){Object(T.a)(i,t);var e=Object(G.a)(i);function i(t){var A,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[20,12],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"relu",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"sigmoid";Object(M.a)(this,i),(n=e.call(this,R())).fitness=function(){return n.fitness},n.calculate_fitness=function(){n.fitness=200*(Math.pow(2,n.hit)+2.1*n.hit)+400*(1-Math.min(n.distance_travelled/n.ball_travelled,1))+.5*(n.board_size[0]-n.distance_to_ball),n.fitness=Math.max(n.fitness,.1)},n.reset=function(){n.fitness=0,n.hit=0,n.distance_travelled=0,n.distance_to_ball=0,n.is_alive=0},n.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==t?n.network.feed_forward(t):null!==e&&(n.yPaddle=e.yBall-45),0===n.network.out?n.ySpeed=-15:1===n.network.out?n.ySpeed=15:2===n.network.out&&(n.ySpeed=0),!0},n.move=function(){n.yPaddle+=n.ySpeed,n.distance_travelled+=Math.abs(n.ySpeed)},n.draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.is_alive&&(i?(t.fill("#FFD700"),t.rect(n.xPaddle,n.yPaddle,15,90)):e?(t.fill("#00FFFF"),t.rect(n.xPaddle,n.yPaddle,15,90)):(t.fill("#FFFFFF"),t.rect(n.xPaddle,n.yPaddle,15,90)))},n.xPaddle=a,n.yPaddle=r,n.ySpeed=s,n.board_size=o,n.fitness=0,n.hit=0,n.distance_travelled=0,n.ball_travelled=0,n.distance_to_ball=0,n.is_alive=!0,n.hidden_layer_architecture=c,n.hidden_activation=h,n.output_activation=u;var p=5;return n.network_architecture=[p],(A=n.network_architecture).push.apply(A,Object(d.a)(n.hidden_layer_architecture)),n.network_architecture.push(3),n.network=new L(n.network_architecture,P(n.hidden_activation),P(n.output_activation)),l&&(n.network.params=l),n}return i}(R),X=function t(e,i,A,n){var a=this;Object(M.a)(this,t),this.update=function(t,e){a.distance_travelled+=Math.abs(a.ySpeed),a.yBall<0?(a.yBall=0,a.ySpeed*=-1):a.yBall>e[1]-20?(a.yBall=e[1]-20,a.ySpeed*=-1):a.xBall>e[0]-35?(a.xBall=e[0]-35,a.xSpeed*=-1):a.yBall>t.yPaddle-10&&a.yBall<t.yPaddle+80&&a.xLast>15&&a.xBall<=15?(a.xSpeed*=-1,t.hit+=1,t.distance_to_ball=0):a.xBall<0&&(a.xSpeed*=-1,t.ball_travelled=a.distance_travelled,t.is_alive=!1,t.distance_to_ball=Math.abs(a.xBall-t.xPaddle))},this.move=function(){a.xLast=a.xBall,a.yLast=a.yBall,a.xBall+=a.xSpeed,a.yBall+=a.ySpeed},this.draw=function(t){t.fill("#FFFFFF"),t.ellipse(a.xBall,a.yBall,20,20)},this.xBall=e,this.yBall=i,this.xSpeed=A,this.ySpeed=n,this.xLast=e-A,this.yLast=i-n,this.is_alive=!0,this.distance_travelled=0},H={hidden_layer_activation:"relu",output_layer_activation:"sigmoid",hidden_network_architecture:[12,20,12],mutation_rate:.05,mutation_rate_type:"static",probability_gaussian:1,probability_random_uniform:0,SBX_eta:100,probability_SBX:1,SPBX_type:"r",probability_SPBX:0,crossover_selection_type:"roulette_wheel",num_parents:50,num_offspring:100,selection_type:"plus"},V=i(101),Z=function t(e){var i=this;Object(M.a)(this,t),this.num_individuals=function(){return i.individuals.length},this.num_individuals_=function(){throw new Error("Cannot set the number of individuals. You must change Population.individuals instead")},this.num_genes=function(){return i.individuals[0].chromosome.shape[1]},this.num_genes_=function(){throw new Error("Cannot set the number of genes. You must change Population.individuals instead")},this.average_fitness=function(){var t,e=0,A=Object(E.a)(i.individuals);try{for(A.s();!(t=A.n()).done;){e+=t.value.fitness}}catch(n){A.e(n)}finally{A.f()}return e/i.individuals.length},this.average_fitness_=function(){throw new Error("Cannot set average fitness. This is a read-only property.")},this.fittest_individual=function(){var t,e=0,A=null,n=Object(E.a)(i.individuals);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.fitness>e&&(e=a.fitness,A=a)}}catch(r){n.e(r)}finally{n.f()}return A},this.fittest_individual_=function(){throw new Error("Cannot set fittest individual. This is a read-only property")},this.calculate_fitness=function(){var t,e=Object(E.a)(i.individuals);try{for(e.s();!(t=e.n()).done;){t.value.calculate_fitness()}}catch(A){e.e(A)}finally{e.f()}},this.get_fitness_std=function(){return V.std(V.array(i.individuals.map((function(t){return t.fitness}))))},this.individuals=e},J=(i(101),i(102));function K(t,e){return t.individuals.sort((function(t){return t.fitness})).reverse().slice(0,e)}function q(t,e){var i,A=[],n=0,a=Object(E.a)(t.individuals);try{for(a.s();!(i=a.n()).done;){n+=(h=i.value).fitness}}catch(u){a.e(u)}finally{a.f()}for(var r=0;r<e;r++){var s,o=J.float(0,n),l=0,c=Object(E.a)(t.individuals);try{for(c.s();!(s=c.n()).done;){var h;if((l+=(h=s.value).fitness)>o){A.push(h);break}}}catch(u){c.e(u)}finally{c.f()}}return A}i(101);var $=i(102);function tt(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=[],r=0;r<t.shape[0];r++){for(var s=[],o=0;o<t.shape[1];o++)s.push($.float()<e?1:0);a.push(s)}var l=[];if(A&&n)l=$.normal(A,n)();else for(r=0;r<t.shape[0];r++){for(s=[],o=0;o<t.shape[1];o++)s.push($.normal()());l.push(s)}if(i)for(r=0;r<t.shape[0];r++)for(o=0;o<t.shape[1];o++)a[r][o]&&(l[r][o]*=i);for(r=0;r<t.shape[0];r++)for(o=0;o<t.shape[1];o++)1===a[r][o]&&t.set(r,o,t.get(r,o)+l[r][o])}var et=i(101);i(102);function it(t,e,i){for(var A=et.random(et.array(t).shape),n=et.zeros(et.array(t).shape),a=0;a<n.shape[0];a++)for(var r=0;r<n.shape[1];r++)A.get(a,r)<=.5?n.set(a,r,Math.pow(2*A.get(a,r),1/(i+1))):n.set(a,r,Math.pow(1/(2*(1-A.get(a,r))),1/(i+1)));return[n.add(1).multiply(t).add(et.ones(n.shape).subtract(n)).multiply(e).multiply(.5),et.ones(n.shape).subtract(n).multiply(t).add(n.add(1).multiply(e)).multiply(.5)]}function At(t,e){var i=et.copy(t),A=et.copy(e);return[i,A]}var nt=i(102);i(101);function at(t){var e,i=(e=0,function(t){return e+=t}),n=[H.probability_gaussian,H.probability_random_uniform].map(i),a=[H.probability_SBX,H.probability_SPBX].map(i),r=H.SPBX_type.toLowerCase(),s=H.SBX_eta,o=t.settings.mutationRate,l=null;if("plus"==H.selection_type.toLowerCase())l=t.settings.numParents+t.settings.numOffsprings;else{if("comma"!=H.selection_type.lower())throw new Error('Selection type "{}" is invalid'.format(H.selectionType));l=t.settings.numOffsprings}var h=t.dimension,u=[],d=[],p=new Z(u),g=0,f=null,b=-1,v=null,m=-1,y=Number.NEGATIVE_INFINITY,x=0,j=0,_=null,w=!0,O=function(e){g++,w=!0,x=0;var i,A=Object(E.a)(p.individuals);try{for(A.s();!(i=A.n()).done;){i.value.calculate_fitness()}}catch(L){A.e(L)}finally{A.f()}f=p.fittest_individual(),b=p.individuals.indexOf(f),f.fitness>y&&(y=f.fitness,v=f,m=b),f.reset(),v.reset(),console.log("======================= Generation",g,"======================="),console.log("----Max fitness:",p.fittest_individual().fitness),console.log("----Average fitness:",p.average_fitness()),t.addAvgFitness(p.average_fitness()),t.addMaxFitness(p.fittest_individual().fitness),p.individuals=K(p,t.settings.numParents),p.individuals=C(p.individuals);var n=[];for("plus"===H.selection_type.toLowerCase()&&(n.push(f),n.push(v));n.length<l;){for(var a=q(p,2),r=Object(c.a)(a,2),s=r[0],o=r[1],u=s.network.layer_nodes.length,d={},j={},_=1;_<u;_++){var O,B,I,Q,M=s.network.params["W"+_.toString()],T=o.network.params["W"+_.toString()],G=s.network.params["b"+_.toString()],R=o.network.params["b"+_.toString()],z=S(M,T,G,R),W=Object(c.a)(z,4);O=W[0],B=W[1],I=W[2],Q=W[3],k(O,B,I,Q),d["W"+_.toString()]=O,j["W"+_.toString()]=B,d["b"+_.toString()]=I,j["b"+_.toString()]=Q;for(var F=0;F<d["W"+_.toString()].shape[0];F++)for(var D=0;D<d["W"+_.toString()].shape[1];D++)d["W"+_.toString()].set(F,D,d["W"+_.toString()].get(F,D)<-1?-1:d["W"+_.toString()].get(F,D)),d["W"+_.toString()].set(F,D,d["W"+_.toString()].get(F,D)>1?1:d["W"+_.toString()].get(F,D)),j["W"+_.toString()].set(F,D,j["W"+_.toString()].get(F,D)<-1?-1:j["W"+_.toString()].get(F,D)),j["W"+_.toString()].set(F,D,j["W"+_.toString()].get(F,D)>1?1:j["W"+_.toString()].get(F,D)),d["b"+_.toString()].set(F,D,d["b"+_.toString()].get(F,D)<-1?-1:d["b"+_.toString()].get(F,D)),d["b"+_.toString()].set(F,D,d["b"+_.toString()].get(F,D)>1?1:d["b"+_.toString()].get(F,D)),j["b"+_.toString()].set(F,D,j["b"+_.toString()].get(F,D)<-1?-1:j["b"+_.toString()].get(F,D)),j["b"+_.toString()].set(F,D,j["b"+_.toString()].get(F,D)>1?1:j["b"+_.toString()].get(F,D))}var U=new Y(e,0,h[1]/2-45,0,h,d,t.settings.hiddenLayerArchitecture,H[H.output_activation]),N=new Y(e,0,h[1]/2-45,0,h,j,t.settings.hiddenLayerArchitecture,H[H.output_activation]);n.push.apply(n,[U,N])}C(n),p.individuals=n},S=function(t,e,i,A){for(var n=nt.float(),o=null,l=1;l<a.length;l++)n<a[l]&&(o=l-1);var h=null,u=null,d=null,p=null;if(0===o){var g=it(t,e,s),f=Object(c.a)(g,2);h=f[0],u=f[1];var b=it(i,A,s),v=Object(c.a)(b,2);d=v[0],p=v[1]}else{if(1!==o)throw new Error("Unable to determine valid crossover based off probabilities");var m=At(t,e,r),y=Object(c.a)(m,2);h=y[0],u=y[1];var x=At(i,A,r),j=Object(c.a)(x,2);d=j[0],p=j[1]}return[h,u,d,p]},k=function(e,i,A,a){for(var r=.2,s=nt.float(),l=null,c=1;c<n.length;c++)s<n[c]&&(l=c-1);var h=o;if("decaying"===t.settings.mutationRateType.toLowerCase()&&(h/=Math.sqrt(g+1)),0===l)tt(e,h,r),tt(i,h,r),tt(A,h,r),tt(a,h,r);else if(1!==l)throw new Error("Unable to determine valid mutation based off probabilities.")},C=function(t){for(var e,i,A=t.length;0!==A;)i=Math.floor(Math.random()*A),e=t[A-=1],t[A]=t[i],t[i]=e;return t};return Object(A.jsx)("div",{children:Object(A.jsx)(Q.a,{setup:function(e,i){e.createCanvas(h[0],h[1]).parent(i),_=new Y(e,h[0]-15,h[1]/2-45,0,h);for(var A=0;A<t.settings.numParents;A++){var n=new Y(e,0,h[1]/2-45,0,h,null,t.settings.hiddenLayerArchitecture,H[H.output_activation]);u.push(n)}var a=e.createButton("Return").parent(i);a.position(30,10),a.style("background-color","#8A2BE2"),a.mousePressed(t.updateStart)},draw:function(t){if(t.background(0),t.textSize(20),t.fill("#FFFFFF"),t.text("Generation: "+g,h[0]-180,30),t.text("Hit: "+x,h[0]-180,60),t.text("Best: "+j,h[0]-180,90),w){d=[];for(var e=nt.int(0,h[1]),i=1===nt.int()?15:-15,A=0;A<l+1;A++)d.push(new X(h[0]/2,e,15,i));w=!1}_.update(null,d[d.length-1]),d[d.length-1].update(_,h),d[d.length-1].move(),_.is_alive=!0,_.draw(t);var n=0;for(A=0;A<p.individuals.length;A++){var a=p.individuals[A];if(a.is_alive){n++;var r=[[a.yPaddle],[d[A].ySpeed],[a.ySpeed],[d[A].yBall],[d[A].xSpeed]];a.update(r),d[A].update(a,h),x=Math.max(x,a.hit),j=Math.max(x,j),d[A].move(),a.move()}a.is_alive&&a!==f&&a!==v&&(d[A].draw(t),a.draw(t))}null!==f&&f.is_alive&&(d[b].draw(t),f.draw(t,!0,!1)),null!==v&&v.is_alive&&(d[m].draw(t),v.draw(t,!1,!0)),0===n&&O(t)}})})}var rt=a.a.memo(at,(function(t,e){return!0})),st=i(11),ot=function(){function t(e,i,A,n){Object(M.a)(this,t),this.x=e,this.y=i,this.w=A,this.h=n}return Object(st.a)(t,[{key:"draw",value:function(t,e){e.draw(t,this.x,this.y,this.w,this.h)}},{key:"contains",value:function(t){var e=t[0],i=t[1];return e>=this.x&&e<this.x+this.w&&i>=this.y&&i<this.y+this.h}},{key:"collideRect",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?!(!this.contains([t.x,t.y])&&!t.contains([this.x,this.y])):this.x==t.x||this.y==t.y}}]),t}(),lt=function(t){Math.PI;this.image=null,void 0!=t&&""!=t&&null!=t?(this.image=new Image,this.image.src=t):console.log("cannot load file"),this.draw=function(t,e,i,A,n){void 0==A||void 0==n?t.drawImage(this.image,e,i):t.drawImage(this.image,e,i,A,n)},this.rotate=function(t,e,i,A){t.save(),t.scale(t.dpr,t.dpr),t.translate(e,i),t.rotate(A*this.TO_RADIAN),t.drawImage(this.image,-this.image.width/2,-this.image.height/2),t.restore()}};function ct(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(t,e){t=Math.ceil(t),e=Math.floor(e);return t+i*Math.floor(Math.random()*(e-t)/i)}(t,e)}function ht(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return t==e};if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var A=0;A<t.length;A++)if(!i(t[A],e[A]))return!1;return!0}function ut(t,e,i){if(null==t)return!1;var A=!1;return t.forEach((function(t,n){i(t,e)&&(A=!0)})),A}function dt(t,e){var i=Object(c.a)(t,2),A=i[0],n=i[1],a=Object(c.a)(e,2),r=a[0],s=a[1];return Math.sqrt(Math.pow(A-r,2)+Math.pow(n-s,2))}function pt(t,e){if(t.length<e)return t;for(var i=t.map((function(t,e){return t})),A=[],n=0;n<e;n++){var a=ct(0,i.length);A.push(i.splice(a,1)[0])}return A}String.prototype.format=function(){var t=0,e=arguments;return this.replace(/{}/g,(function(){return"undefined"!=typeof e[t]?e[t++]:""}))};var gt=i(101),ft=i(102),bt=function(t){return 1/(1+gt.exp(-t))},vt=function(t){return gt.tanh(t)},mt=function(t){var e,i=[],A=Object(E.a)(t);try{for(A.s();!(e=A.n()).done;){var n=e.value;n>=0?i.push(n):i.push([0])}}catch(a){A.e(a)}finally{A.f()}return i},yt=function(t){return t},xt=function t(e,i,A){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"uniform";Object(M.a)(this,t),this.feed_forward=function(t){for(var e=t,i=n.layer_nodes.length-1,A=null,a=null,r=null,s=1;s<i;s++)A=n.params["W"+s.toString()],a=n.params["b"+s.toString()],r=gt.dot(A,e).add(gt.array(a)),e=n.hidden_activation(r.tolist()),n.params["A"+s.toString()]=e;A=n.params["W"+i.toString()],a=n.params["b"+i.toString()],r=gt.dot(A,e).add(gt.array(a));var o=n.hidden_activation(r.tolist());n.params["A"+i.toString()]=o;for(var l=0;l<o.length;l++)(null===n.out||o[l][0]>n.out)&&(n.out=l);return n.out},this.params={},this.layer_nodes=e,this.hidden_activation=i,this.output_activation=A,this.inputs=null,this.out=null;for(var r=1;r<this.layer_nodes.length;r++){if("uniform"!=a)throw new Error("Implement more options, bro");for(var s=[],o=0;o<this.layer_nodes[r];o++){for(var l=[],c=0;c<this.layer_nodes[r-1];c++)l.push(ft.uniform(-1,1)());s.push(l)}var h=[];for(o=0;o<this.layer_nodes[r];o++)h.push([ft.uniform(-1,1)()]);this.params["W"+r.toString()]=s,this.params["b"+r.toString()]=h,this.params["A"+r.toString()]=null}},jt=function(t){for(var e=[["relu",mt],["sigmoid",bt],["linear",yt],["tanh",vt]],i=[],A=0;A<e.length;A++)e[A][0]===t.toLowerCase()&&i.push(e[A][1]);return console.assert(1==i.length),i[0]},_t=function(t){Object(T.a)(i,t);var e=Object(G.a)(i);function i(t){var A,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[20,12],p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"relu",g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"sigmoid";Object(M.a)(this,i),(n=e.call(this,R())).fitness=function(){return n.fitness},n.calculate_fitness=function(){n.fitness=n.total_steps+(Math.pow(2,n.apples)+500*Math.pow(n.apples,2.1))-.25*Math.pow(n.total_steps,1.3)*Math.pow(n.apples,1.2),n.fitness=Math.max(n.fitness,.1)},n.reset=function(){n._fitness=0,n.apples=0,n.is_alive=!0,n.steps=0,n.total_steps=0,n.distance=0,n.x=200,n.y=200,n.length=3,n.initialize(),n.head=n.body[0]},n.updateDirection=function(t){n.network.feed_forward(t),0===n.network.out?"D"!==n.direction&&(n.direction="U"):1===n.network.out?"U"!==n.direction&&(n.direction="D"):2===n.network.out?"L"!==n.direction&&(n.direction="R"):3===n.network.out&&"R"!==n.direction&&(n.direction="L")},n.x=a,n.y=r,n.length=s,n.direction=o,n.boxSize=l,n.board_size=c,n.body=[],n.initialize(),n.head=n.body[0],n._fitness=0,n.is_alive=!0,n.reach_apple=!1,n.apples=0,n.total_steps=0,n.steps=0,n.distance=0,n.winner=!1,n.champion=!1,n.hidden_layer_architecture=u,n.hidden_activation=p,n.output_activation=g;var f=12;return n.network_architecture=[f],(A=n.network_architecture).push.apply(A,Object(d.a)(n.hidden_layer_architecture)),n.network_architecture.push(3),n.network=new xt(n.network_architecture,jt(n.hidden_activation),jt(n.output_activation)),h&&(n.network.params=h),n}return Object(st.a)(i,[{key:"initialize",value:function(){var t=0,e=0;"R"==this.direction&&(t=-1),"L"==this.direction&&(t=1),"U"==this.direction&&(e=1),"D"==this.direction&&(e=-1);for(var i=0;i<this.length;i++){var A=new ot(this.x+t*i*this.boxSize,this.y+e*i*this.boxSize,this.boxSize,this.boxSize);this.body.push(A)}}},{key:"addHead",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=0,i=0;"R"==this.direction&&(e=1),"L"==this.direction&&(e=-1),"U"==this.direction&&(i=-1),"D"==this.direction&&(i=1),t?(this.x=this.x+e*this.boxSize,this.y=this.y+i*this.boxSize):(this.x=(this.x+e*this.boxSize)%this.board_size[0],this.y=(this.y+i*this.boxSize)%this.board_size[1]);var A=new ot(this.x,this.y,this.boxSize,this.boxSize);this.body.unshift(A),this.head=this.body[0]}},{key:"deleteTail",value:function(){return this.body.pop()}},{key:"collideWithBody",value:function(){for(var t=1;t<this.body.length;t++){var e=this.body[t];if(this.head.collideRect(e))return!0}return!1}},{key:"collideWithWall",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=new ot(0,0,this.board_size[0],this.board_size[1]);if(!i.contains([this.x,this.y]))return!0;if(null==e)return!1;var A=!1;return e.forEach((function(e){t.head.collideRect(e)&&(A=!0)})),A}},{key:"draw",value:function(t){t.fill("#7ffc03");for(var e=0;e<this.body.length;e++){var i=this.body[e];t.rect(i.x,i.y,this.boxSize,this.boxSize)}}}]),i}(R),wt=function(){function t(e,i,A,n,a){Object(M.a)(this,t),this.boxLength=e,this.x=i,this.y=A,this.board_x=n,this.board_y=a,this.rect=new ot(this.x,this.y,this.boxLength,this.boxLength)}return Object(st.a)(t,[{key:"move",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=function(t,e){return ht(t,e)};;){var i=ct(0,this.board_x,this.boxLength),A=ct(0,this.board_y,this.boxLength),n=ut(t,[i,A],e);if(null==t||!n)break}this.rect=new ot(i,A,this.boxLength,this.boxLength),this.x=i,this.y=A}},{key:"draw",value:function(t){t.fill("#ff0000"),t.rect(this.x,this.y,this.boxLength,this.boxLength)}}]),t}(),Ot={hidden_layer_activation:"relu",output_layer_activation:"sigmoid",hidden_network_architecture:[12,20,12],mutation_rate:.05,mutation_rate_type:"static",probability_gaussian:1,probability_random_uniform:0,SBX_eta:100,probability_SBX:1,SPBX_type:"r",probability_SPBX:0,crossover_selection_type:"roulette_wheel",num_parents:50,num_offspring:100,selection_type:"plus"},St=i(102);i(101);function kt(t){var e,i=(e=0,function(t){return e+=t}),n=[Ot.probability_gaussian,Ot.probability_random_uniform].map(i),a=[Ot.probability_SBX,Ot.probability_SPBX].map(i),r=Ot.SPBX_type.toLowerCase(),s=Ot.SBX_eta,o=t.settings.mutationRate,l=null;if("plus"==Ot.selection_type.toLowerCase())l=t.settings.numParents+t.settings.numOffsprings;else{if("comma"!=Ot.selection_type.lower())throw new Error('Selection type "{}" is invalid'.format(Ot.selectionType));l=t.settings.numOffsprings}var h=t.dimension,u=[],d=new Z(u),p=0,g=null,f=-1,b=null,v=Number.NEGATIVE_INFINITY,m=0,y=0,x=null,j=function(){var t=["U","D","L","R"];return t[Math.floor(Math.random()*t.length)]},_=function(e){p++,m=0;var i,A=Object(E.a)(d.individuals);try{for(A.s();!(i=A.n()).done;){var n=i.value;n.calculate_fitness()}}catch(L){A.e(L)}finally{A.f()}console.log(n.fitness),g=d.fittest_individual(),f=d.individuals.indexOf(g),g.fitness>v&&(v=g.fitness,b=g,f),g.reset(),b.reset(),console.log("======================= Generation",p,"======================="),console.log("----Max fitness:",d.fittest_individual().fitness),console.log("----Average fitness:",d.average_fitness()),t.addAvgFitness(d.average_fitness()),t.addMaxFitness(d.fittest_individual().fitness),d.individuals=K(d,t.settings.numParents),d.individuals=S(d.individuals);var a=[];for("plus"===Ot.selection_type.toLowerCase()&&(a.push(g),a.push(b));a.length<l;){for(var r=q(d,2),s=Object(c.a)(r,2),o=s[0],u=s[1],y=o.network.layer_nodes.length,x={},_={},k=1;k<y;k++){var C,B,I,Q,M=o.network.params["W"+k.toString()],T=u.network.params["W"+k.toString()],G=o.network.params["b"+k.toString()],R=u.network.params["b"+k.toString()],z=w(M,T,G,R),W=Object(c.a)(z,4);C=W[0],B=W[1],I=W[2],Q=W[3],O(C,B,I,Q),x["W"+k.toString()]=C,_["W"+k.toString()]=B,x["b"+k.toString()]=I,_["b"+k.toString()]=Q;for(var F=0;F<x["W"+k.toString()].shape[0];F++)for(var D=0;D<x["W"+k.toString()].shape[1];D++)x["W"+k.toString()].set(F,D,x["W"+k.toString()].get(F,D)<-1?-1:x["W"+k.toString()].get(F,D)),x["W"+k.toString()].set(F,D,x["W"+k.toString()].get(F,D)>1?1:x["W"+k.toString()].get(F,D)),_["W"+k.toString()].set(F,D,_["W"+k.toString()].get(F,D)<-1?-1:_["W"+k.toString()].get(F,D)),_["W"+k.toString()].set(F,D,_["W"+k.toString()].get(F,D)>1?1:_["W"+k.toString()].get(F,D)),x["b"+k.toString()].set(F,D,x["b"+k.toString()].get(F,D)<-1?-1:x["b"+k.toString()].get(F,D)),x["b"+k.toString()].set(F,D,x["b"+k.toString()].get(F,D)>1?1:x["b"+k.toString()].get(F,D)),_["b"+k.toString()].set(F,D,_["b"+k.toString()].get(F,D)<-1?-1:_["b"+k.toString()].get(F,D)),_["b"+k.toString()].set(F,D,_["b"+k.toString()].get(F,D)>1?1:_["b"+k.toString()].get(F,D))}var U=new _t(e,200,200,3,j(),20,h,x,t.settings.hiddenLayerArchitecture,Ot[Ot.output_activation]),N=new _t(e,200,200,3,j(),20,h,_,t.settings.hiddenLayerArchitecture,Ot[Ot.output_activation]);a.push.apply(a,[U,N])}S(a),d.individuals=a},w=function(t,e,i,A){for(var n=St.float(),o=null,l=1;l<a.length;l++)n<a[l]&&(o=l-1);var h=null,u=null,d=null,p=null;if(0===o){var g=it(t,e,s),f=Object(c.a)(g,2);h=f[0],u=f[1];var b=it(i,A,s),v=Object(c.a)(b,2);d=v[0],p=v[1]}else{if(1!==o)throw new Error("Unable to determine valid crossover based off probabilities");var m=At(t,e,r),y=Object(c.a)(m,2);h=y[0],u=y[1];var x=At(i,A,r),j=Object(c.a)(x,2);d=j[0],p=j[1]}return[h,u,d,p]},O=function(e,i,A,a){for(var r=.2,s=St.float(),l=null,c=1;c<n.length;c++)s<n[c]&&(l=c-1);var h=o;if("decaying"===t.settings.mutationRateType.toLowerCase()&&(h/=Math.sqrt(p+1)),0===l)tt(e,h,r),tt(i,h,r),tt(A,h,r),tt(a,h,r);else if(1!==l)throw new Error("Unable to determine valid mutation based off probabilities.")},S=function(t){for(var e,i,A=t.length;0!==A;)i=Math.floor(Math.random()*A),e=t[A-=1],t[A]=t[i],t[i]=e;return t};return Object(A.jsx)("div",{children:Object(A.jsx)(Q.a,{setup:function(e,i){e.createCanvas(h[0],h[1]).parent(i);for(var A=0;A<t.settings.numParents;A++){var n=new _t(e,200,200,3,j(),20,h,null,t.settings.hiddenLayerArchitecture,Ot[Ot.output_activation]);u.push(n)}(x=new wt(20,100,100,h[0],h[1])).move();var a=e.createButton("Return").parent(i);a.position(30,10),a.style("background-color","#8A2BE2"),a.mousePressed(t.updateStart)},draw:function(e){e.background(0),e.textSize(20),e.fill("#FFFFFF"),e.text("Generation: "+p,h[0]-180,30),e.text("Apples: "+m,h[0]-180,60),e.text("Best: "+y,h[0]-180,90),x.draw(e);for(var i=0,A=0,n=0;n<d.individuals.length;n++){var a=d.individuals[n];if(a.is_alive&&(i++,!a.reach_apple)){A++;var r=Array(12).fill([0]);"U"==a.direction?r[0]=[1]:"R"==a.direction?r[1]=[1]:"D"==a.direction?r[2]=[1]:"L"==a.direction&&(r[3]=[1]),x.y<a.y&&(r[4]=[1]),x.x>a.x&&(r[5]=[1]),x.y>a.y&&(r[6]=[1]),x.x<a.x&&(r[7]=[1]);var s={U:{oppo:"D",x:0,y:-20,state:8},R:{oppo:"L",x:20,y:0,state:9},D:{oppo:"U",x:0,y:20,state:10},L:{oppo:"R",x:-20,y:0,state:11}};for(var o in s){var l=s[o];a.direction!=l.oppo&&new _t(e,a.x+l.x,a.y+l.y,1,"U",20,h,null,t.settings.hiddenLayerArchitecture,Ot[Ot.output_activation]).collideWithWall()&&(r[l.state]=[1])}var c=r;a.updateDirection(c);var u=[a.x,a.y];a.addHead();var f=[a.x,a.y],v=[x.x,x.y],j=Math.hypot(v[0]-u[0],v[1]-u[1]),w=Math.hypot(v[0]-f[0],v[1]-f[1]);j>w?a.distance++:j<w&&(a.distance-=1.1),(a.collideWithWall()||a.collideWithBody())&&(a.is_alive=!1),a.head.collideRect(x.rect)?(a.apples++,a.steps=0,a.reach_apple=!0):(a.deleteTail(),a.steps++,a.total_steps++,a.steps>h[0]/2+20&&(a.total_steps=Number.POSITIVE_INFINITY,console.log("dead"),a.is_alive=!1))}a.is_alive&&a!==g&&a!==b&&a.draw(e)}if(null!==g&&g.is_alive&&g.draw(e),null!==b&&b.is_alive&&b.draw(e),0===A){x.move(),++m>y&&(y=m);var O,S=Object(E.a)(d.individuals);try{for(S.s();!(O=S.n()).done;){var k=O.value;k.is_alive&&(k.steps=0,k.reach_apple=!1)}}catch(C){S.e(C)}finally{S.f()}}0===i&&_(e)}})})}var Ct=a.a.memo(kt,(function(t,e){return!0})),Bt={Window_Width:600,Window_Height:300,gravity:.25,init_bird_x_pos:50,init_bird_y_pos:55,bird_jump_speed:-4,pipe_interval_in_frames:30,pipe_interval_in_pixels:300,hidden_layer_activation:"relu",output_layer_activation:"sigmoid",hidden_network_architecture:[6,3],mutation_rate:.05,mutation_rate_type:"static",probability_gaussian:1,probability_random_uniform:0,SBX_eta:100,probability_SBX:.5,SPBX_type:"r",probability_SPBX:.5,crossover_selection_type:"roulette_wheel",num_parents:50,num_offspring:100,selection_type:"plus"},Et=i(101),It=i(102),Qt=function(t){return 1/(1+Et.exp(-t))},Mt=function(t){return Et.tanh(t)},Tt=function(t){var e,i=[],A=Object(E.a)(t);try{for(A.s();!(e=A.n()).done;){var n=e.value;n>=0?i.push(n):i.push([0])}}catch(a){A.e(a)}finally{A.f()}return i},Gt=function(t){return t},Rt=function t(e,i,A){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"uniform";Object(M.a)(this,t),this.feed_forward=function(t){for(var e=t,i=n.layer_nodes.length-1,A=null,a=null,r=null,s=1;s<i;s++)A=n.params["W"+s.toString()],a=n.params["b"+s.toString()],r=Et.dot(A,e).add(Et.array(a)),e=n.hidden_activation(r.tolist()),n.params["A"+s.toString()]=e;A=n.params["W"+i.toString()],a=n.params["b"+i.toString()],r=Et.dot(A,e).add(Et.array(a));var o=n.hidden_activation(r.tolist());n.params["A"+i.toString()]=o;for(var l=0;l<o.length;l++)(null===n.out||o[l][0]>n.out)&&(n.out=l);return n.out},this.params={},this.layer_nodes=e,this.hidden_activation=i,this.output_activation=A,this.inputs=null,this.out=null;for(var r=1;r<this.layer_nodes.length;r++){if("uniform"!=a)throw new Error("Implement more options, bro");for(var s=[],o=0;o<this.layer_nodes[r];o++){for(var l=[],c=0;c<this.layer_nodes[r-1];c++)l.push(It.uniform(-1,1)());s.push(l)}var h=[];for(o=0;o<this.layer_nodes[r];o++)h.push([It.uniform(-1,1)()]);this.params["W"+r.toString()]=s,this.params["b"+r.toString()]=h,this.params["A"+r.toString()]=null}},zt=function(t){for(var e=[["relu",Tt],["sigmoid",Qt],["linear",Gt],["tanh",Mt]],i=[],A=0;A<e.length;A++)e[A][0]===t.toLowerCase()&&i.push(e[A][1]);return console.assert(1==i.length),i[0]},Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEUAAABTOEZU0f/6+vpLwfjX5sz82ITkYBhApNL///8xUeTGAAAAAXRSTlMAQObYZgAAAAFiS0dECfHZpewAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAa0lEQVQY04XRUQ3AIAwE0Fo4C1jAQi3MAhawgOwdpdvYCtn93UsooYhYYJEpXwFSSsgZe2FXJTwUBOyUg+AUBKr/0uO0Ebs1G/lLFlIIhYJqwULG5NZQ741EEdYeXIdWIhg2LTaKT59/4iUna5Q61/PQYY0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMTFUMTg6MDI6MTkrMDY6MDDhKjnDAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAwkHeBfwAAAABJRU5ErkJggg==",Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAG1BMVEUAAABTOEb8cw/6+vr8OADX5sz4tzPTLwD///9hx+6LAAAAAXRSTlMAQObYZgAAAAFiS0dECIbelXoAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAaklEQVQY04XR0Q3AIAgEUFa4FVzBFVjBFVzB9XsitbZoen+8KAYUscAiS74CpJSQM87CWpXwUBCwphSCUxCo/kuP00Hs1Wzkk2ykHy4UVAs2Mjq3hjo3EkVY9uC+tBPBsGWxUbz7+hMvuQDnyDdBQ+XoXAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMOEqOcMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDMtMTFUMTg6MDI6MTkrMDY6MDCQd4F/AAAAAElFTkSuQmCC",Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAG1BMVEUAAABTOEb614z6+vr4tzPX5sz8OADggCz///+gdOUrAAAAAXRSTlMAQObYZgAAAAFiS0dECIbelXoAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAaUlEQVQY04XR0Q3AIAgEUFa4FVjBFVihK7iC6/dE2tqi6f3dS8SIIh54ZMpXAFVFKdgLuxnhoSRgpxyEoCQw+5eeoI34rcUpXrIQJSgF1YOFjMmtod4bySKsPbgOrUQwbFpslpg+/8RLTmK0NnWK1qPLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAw4So5wwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMJB3gX8AAAAASUVORK5CYII=",Ut=function(t){Object(T.a)(i,t);var e=Object(G.a)(i);function i(t){var A,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[12,20],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"relu",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"sigmoid",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bt.init_bird_x_pos,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bt.init_bird_y_pos,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;Object(M.a)(this,i),(n=e.call(this,R())).fitness=function(){return n.fitness},n.bird_top=function(){return n.y_pos-n.bird_sprite.height/2},n.bird_bottom=function(){return n.y_pos+n.bird_sprite.height/2},n.bird_left=function(){return n.x_pos-n.bird_sprite.width/2},n.bird_right=function(){return n.x_pos+n.bird_sprite.width/2},n.calculate_fitness=function(){n.fitness=200*(Math.pow(n.score,2)+2.1*n.score)+1e3-n.x_distance_to_next_pipe_center-20*Math.abs(n.y_distance_to_next_pipe_center),n.fitness=Math.max(n.fitness,.1)},n.reset=function(){n.fitness=0,n.score=0,n.x_distance_to_next_pipe_center=0,n.y_distance_to_next_pipe_center=0,n.x_pos=Bt.init_bird_x_pos,n.y_pos=Bt.init_bird_y_pos,n.y_speed=0,n.is_alive=!0},n.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.network.feed_forward(t),1==n.network.out&&(n.y_speed=Bt.bird_jump_speed),!0},n.move=function(t){n.y_pos+=n.y_speed,n.y_speed+=Bt.gravity,n.score+=1/(Bt.pipe_interval_in_pixels/5),n.check_collision(t)},n.check_collision=function(t){var e,i=Object(E.a)(t);try{for(i.s();!(e=i.n()).done;){e.value.collide(n.x_pos,n.y_pos,n.bird_sprite)&&(n.is_alive=!1)}}catch(A){i.e(A)}finally{i.f()}(n.bird_top()<=0||n.bird_bottom()>=n.Window_Height-50)&&(n.is_alive=!1)},n.draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.is_alive&&(t.push(),t.translate(n.x_pos,n.y_pos),t.rotate(n.y_speed/20),i?t.image(n.champbird_sprite,-n.champbird_sprite.width/2,-n.champbird_sprite.height/2):e?t.image(n.winnerbird_sprite,-n.winnerbird_sprite.width/2,-n.winnerbird_sprite.height/2):t.image(n.bird_sprite,-n.bird_sprite.width/2,-n.bird_sprite.height/2),t.pop())},n.Window_Width=Bt.Window_Width,n.Window_Height=Bt.Window_Height,n.x_pos=l,n.y_pos=c,n.y_speed=h,n.bird_sprite=t.loadImage(Wt),n.champbird_sprite=t.loadImage(Ft),n.winnerbird_sprite=t.loadImage(Dt),n.fitness=0,n.score=0,n.x_distance_to_next_pipe_center=0,n.y_distance_to_next_pipe_center=0,n.is_alive=!0,n.hidden_layer_architecture=r,n.hidden_activation=s,n.output_activation=o;var u=5;return n.network_architecture=[u],(A=n.network_architecture).push.apply(A,Object(d.a)(n.hidden_layer_architecture)),n.network_architecture.push(2),n.network=new Rt(n.network_architecture,zt(n.hidden_activation),zt(n.output_activation)),a&&(n.network.params=a),n}return i}(R),Nt=(i(102),function t(e,i,A,n,a){var r=this;Object(M.a)(this,t),this.right_x=function(){return r.x+r.width/2},this.left_x=function(){return r.x-r.width/2},this.top_or_bottom_y=function(){return r.y},this.top_y=function(){return r.isBottom?r.y:r.y-r.height},this.bottom_y=function(){return r.isBottom?r.y+r.height:r.y},this.move=function(){r.x-=5},this.collide=function(t,e,i){var A=i.width/2,n=i.height/2;return t>=r.left_x()-A&&t<=r.right_x()+A&&e>=r.top_y()-n&&e<=r.bottom_y()+n},this.draw=function(t,e){t.push(),r.isBottom?t.translate(r.left_x(),r.top_y()):(t.translate(r.left_x()+e.width,r.bottom_y()),t.rotate(Math.PI)),t.image(e,0,0),t.pop()},this.isBottom=e,this.x=i,this.y=A,this.height=n,this.width=a});Nt.create_pipe_pair=function(t,e,i){var A=25*Math.floor(5*Math.random())+120,n=new Nt(!0,t+Bt.pipe_interval_in_pixels,A,e,i),a=new Nt(!1,t+Bt.pipe_interval_in_pixels,A-100,e,i);return console.log("Generating new pipe pair"),console.log([n,a]),[n,a]};var Lt=Nt,Pt=i(99),Yt=i(102);i(101);function Xt(t){var e,i=(e=0,function(t){return e+=t}),n=[Bt.probability_gaussian,Bt.probability_random_uniform].map(i),a=[Bt.probability_SBX,Bt.probability_SPBX].map(i),r=Bt.SPBX_type.toLowerCase(),s=Bt.SBX_eta,o=Bt.mutation_rate,l=null;if("plus"==Bt.selection_type.toLowerCase())l=Bt.num_parents+Bt.num_offspring;else{if("comma"!=Bt.selection_type.lower())throw new Error('Selection type "{}" is invalid'.format(Bt.selection_type));l=Bt.num_offspring}var h=t.dimension,u=t.dimension[0],p=t.dimension[1];console.log(u,p);var g=[],f=new Z(g),b=0,v=null,m=-1,y=null,x=Number.NEGATIVE_INFINITY,j=null,_=null,w=0,O=null,S=[],k=0,C=0,B=function(t){t.push(),t.image(_,w,p-50),t.image(_,w+_.width,p-50),t.image(_,w+2*_.width,p-50),t.image(_,w+3*_.width,p-50),t.pop()},I=function(t){var e,i=Object(E.a)(t);try{for(i.s();!(e=i.n()).done;){e.value.move()}}catch(A){i.e(A)}finally{i.f()}return t},M=function(t,e){var i,A=Object(E.a)(e);try{for(A.s();!(i=A.n()).done;){i.value.draw(t,O)}}catch(n){A.e(n)}finally{A.f()}},T=function(t){var e,i=null,A=null,n=Object(E.a)(S);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.right_x()>Bt.init_bird_x_pos&&null==i?i=a:null!=i&&null==A&&(A=a)}}catch(r){n.e(r)}finally{n.f()}return t?A:i},G=function(e){b++,k=0,S.length=0,S.push.apply(Lt.create_pipe_pair(u,O.height,O.width)),0;var i,A=Object(E.a)(f.individuals);try{for(A.s();!(i=A.n()).done;){i.value.calculate_fitness()}}catch(L){A.e(L)}finally{A.f()}v=f.fittest_individual(),m=f.individuals.indexOf(v),v.fitness>x&&(x=v.fitness,y=v,m),v.reset(),y.reset(),console.log("======================= Generation",b,"======================="),console.log("----Max fitness:",f.fittest_individual().fitness),console.log("----Average fitness:",f.average_fitness()),t.addAvgFitness(f.average_fitness()),t.addMaxFitness(f.fittest_individual().fitness),f.individuals=K(f,Bt.num_parents),f.individuals=W(f.individuals);var n=[];for("plus"===Bt.selection_type.toLowerCase()&&(n.push(v),n.push(y));n.length<l;){for(var a=q(f,2),r=Object(c.a)(a,2),s=r[0],o=r[1],h=s.network.layer_nodes.length,d={},p={},g=1;g<h;g++){var j,_,w,C,B=s.network.params["W"+g.toString()],I=o.network.params["W"+g.toString()],Q=s.network.params["b"+g.toString()],M=o.network.params["b"+g.toString()],T=R(B,I,Q,M),G=Object(c.a)(T,4);j=G[0],_=G[1],w=G[2],C=G[3],z(j,_,w,C),d["W"+g.toString()]=j,p["W"+g.toString()]=_,d["b"+g.toString()]=w,p["b"+g.toString()]=C;for(var F=0;F<d["W"+g.toString()].shape[0];F++)for(var D=0;D<d["W"+g.toString()].shape[1];D++)d["W"+g.toString()].set(F,D,d["W"+g.toString()].get(F,D)<-1?-1:d["W"+g.toString()].get(F,D)),d["W"+g.toString()].set(F,D,d["W"+g.toString()].get(F,D)>1?1:d["W"+g.toString()].get(F,D)),p["W"+g.toString()].set(F,D,p["W"+g.toString()].get(F,D)<-1?-1:p["W"+g.toString()].get(F,D)),p["W"+g.toString()].set(F,D,p["W"+g.toString()].get(F,D)>1?1:p["W"+g.toString()].get(F,D)),d["b"+g.toString()].set(F,D,d["b"+g.toString()].get(F,D)<-1?-1:d["b"+g.toString()].get(F,D)),d["b"+g.toString()].set(F,D,d["b"+g.toString()].get(F,D)>1?1:d["b"+g.toString()].get(F,D)),p["b"+g.toString()].set(F,D,p["b"+g.toString()].get(F,D)<-1?-1:p["b"+g.toString()].get(F,D)),p["b"+g.toString()].set(F,D,p["b"+g.toString()].get(F,D)>1?1:p["b"+g.toString()].get(F,D))}var U=new Ut(e,d,Bt.hidden_network_architecture,Bt.hidden_layer_activation,Bt.output_layer_activation,Bt.init_bird_x_pos,Bt.init_bird_y_pos,0),N=new Ut(e,p,Bt.hidden_network_architecture,Bt.hidden_layer_activation,Bt.output_layer_activation,Bt.init_bird_x_pos,Bt.init_bird_y_pos,0);n.push.apply(n,[U,N])}W(n),f.individuals=n},R=function(t,e,i,A){for(var n=Yt.float(),o=null,l=1;l<a.length;l++)n<a[l]&&(o=l-1);var h=null,u=null,d=null,p=null;if(0===o){var g=it(t,e,s),f=Object(c.a)(g,2);h=f[0],u=f[1];var b=it(i,A,s),v=Object(c.a)(b,2);d=v[0],p=v[1]}else{if(1!==o)throw new Error("Unable to determine valid crossover based off probabilities");var m=At(t,e,r),y=Object(c.a)(m,2);h=y[0],u=y[1];var x=At(i,A,r),j=Object(c.a)(x,2);d=j[0],p=j[1]}return[h,u,d,p]},z=function(t,e,i,A){for(var a=.2,r=Yt.float(),s=null,l=1;l<n.length;l++)r<n[l]&&(s=l-1);var c=o;if("decaying"===Bt.mutation_rate_type.toLowerCase()&&(c/=Math.sqrt(b+1)),0===s)tt(t,c,a),tt(e,c,a),tt(i,c,a),tt(A,c,a);else if(1!==s)throw new Error("Unable to determine valid mutation based off probabilities.")},W=function(t){for(var e,i,A=t.length;0!==A;)i=Math.floor(Math.random()*A),e=t[A-=1],t[A]=t[i],t[i]=e;return t};return Object(A.jsx)("div",{children:Object(A.jsx)(Q.a,{setup:function(e,i){console.log("=================Flappy setup=========================="),console.log("=================Flappy setup=========================="),console.log("=================Flappy setup=========================="),j=e.loadImage("data:image/png;base64,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"),_=e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVAAAABwBAMAAAC6HTVoAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEVUOEfk/Ytzvy6c5llVgCLXqEze2JX////FcUEnAAAAAWJLR0QHFmGI6wAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+MDDAACE+f6JbgAAACmSURBVHja7c5BCQIBAAVRK1jBClawghXsH0HYu7AHYefDm9Mc3+2mP3cfaQf6OHoelX8M2vH8/C1oyPPzp6BXG079EvRyw6kfgl5vOPU70IDh1O9AXyPtQN8j7UA/I4GC1gMFrQcKWg8UtB4oaD1Q0HqgoPVAQeuBgtYDBa0HCloPFLQeKGg9UNB6oKD1QEHrgYLWAwWtBwpaDxS0HihoPVDQejPQL4Py73DUmV51AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAw4So5wwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMJB3gX8AAAAASUVORK5CYII="),O=e.loadImage("data:image/png;base64,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"),console.log(S),e.createCanvas(h[0],h[1]).parent(i);for(var A=0;A<Bt.num_parents;A++){var n=new Ut(e,null,Bt.hidden_network_architecture,Bt.hidden_layer_activation,Bt.output_layer_activation,Bt.init_bird_x_pos,Bt.init_bird_y_pos,0);g.push(n)}var a=e.createButton("Return").parent(i);a.position(30,10),a.style("background-color","#8A2BE2"),a.mousePressed(t.updateStart)},draw:function(t){var e;(t.background(99),t.push(),t.scale(1.75),t.image(j,0,0,u),t.pop(),1,S.length<=1||S[S.length-1].x<=u)&&(e=S).push.apply(e,Object(d.a)(Lt.create_pipe_pair(u,O.height,O.width)));S=I(S),M(t,S),w=(w-6)%-u,B(t),t.push(),t.textSize(14),t.text("Generation: "+Math.floor(b),u-150,30),t.text("Score: "+Math.floor(Math.max(k-1.2,0)),u-150,60),t.text("Best: "+Math.floor(Math.max(C-1.2,0)),u-150,90),t.pop();for(var i=0,A=0;A<f.individuals.length;A++){var n=f.individuals[A];if(n.is_alive){i++;var a=T(!1),r=T(!0);n.x_distance_to_next_pipe_center=a.right_x()-Bt.init_bird_x_pos,n.y_distance_to_next_pipe_center=a.top_or_bottom_y()-50-n.y_pos,null!=r?(n.x_distance_to_next_next_pipe_center=r.right_x()-Bt.init_bird_x_pos,n.y_distance_to_next_next_pipe_center=r.top_or_bottom_y()-50-n.y_pos):(n.x_distance_to_next_next_pipe_center=0,n.y_distance_to_next_next_pipe_center=0);var s=[[n.y_speed],[n.y_pos],[n.x_distance_to_next_pipe_center],[n.y_distance_to_next_pipe_center],[n.y_distance_to_next_next_pipe_center]];n.update(s),n.move(S),k=Math.max(k,n.score),C=Math.max(k,C)}n.is_alive&&n!==v&&n!==y&&n.draw(t)}0===i&&G(t),null!==v&&v.is_alive&&v.draw(t,!0,!1),null!==y&&y.is_alive&&y.draw(t,!1,!0),t.frameRate(60)}})})}var Ht=a.a.memo(Xt,(function(t,e){return!0}));var Vt=function(t){var e=Object(n.useRef)(null),i=Object(n.useRef)(null),a=Object(n.useState)({width:0,height:0}),r=Object(c.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)({width:0,height:0}),h=Object(c.a)(l,2),u=h[0],p=h[1],v=Object(n.useState)({hiddenLayerArchitecture:null,mutationRate:null,mutationRateType:null,numParents:null,numOffsprings:null}),m=Object(c.a)(v,2),y=m[0],x=m[1],j=Object(n.useState)(!1),_=Object(c.a)(j,2),w=_[0],O=_[1],S=Object(n.useState)([[0,1e3]]),C=Object(c.a)(S,2),E=C[0],I=C[1],Q=Object(n.useState)([[0,1e3]]),M=Object(c.a)(Q,2),T=M[0],G=M[1],R=function(t){I((function(e){return[].concat(Object(d.a)(e),[[e.length,t]])}))},z=function(t){G((function(e){return[].concat(Object(d.a)(e),[[e.length,t]])}))};Object(n.useEffect)((function(){e.current&&o({width:e.current.offsetWidth,height:e.current.offsetHeight}),i.current&&p({width:i.current.offsetWidth,height:i.current.offsetHeight})}),[e,i]);var W=function(){O(!w),I([]),G([])};return Object(A.jsxs)(f.a,{basename:"/AlphaGame",children:[Object(A.jsxs)("div",{className:g.a.container,children:[Object(A.jsx)("h1",{className:g.a.name,onClick:function(){t.history.push("/AlphaGame/")},children:Object(A.jsx)(f.b,{to:"/",className:g.a.text,children:"AlphaGame"})}),Object(A.jsxs)("div",{className:g.a.background,children:[Object(A.jsx)("div",{className:g.a.gameScreen,ref:e,children:w?Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake",children:0===s.width?Object(A.jsx)("div",{}):Object(A.jsx)(Ct,{dimension:[s.width,s.height],settings:y,updateStart:W,addAvgFitness:R,addMaxFitness:z})}),Object(A.jsx)(b.a,{path:"/pong",children:0===s.width?Object(A.jsx)("div",{}):Object(A.jsx)(rt,{dimension:[s.width,s.height],settings:y,updateStart:W,addAvgFitness:R,addMaxFitness:z})}),Object(A.jsx)(b.a,{path:"/flappybird",children:0===s.width?Object(A.jsx)("div",{}):Object(A.jsx)(Ht,{dimension:[s.width,s.height],settings:y,updateStart:W,addAvgFitness:R,addMaxFitness:z})})]}):Object(A.jsx)(k,{updateSettings:function(t,e,i,A,n){x({hiddenLayerArchitecture:t,mutationRate:e,mutationRateType:i,numParents:A,numOffsprings:n})},updateStart:W})}),Object(A.jsx)("div",{className:g.a.plotScreen,ref:i,children:0===u.width?Object(A.jsx)("div",{}):Object(A.jsx)(B,{dimension:[u.width,u.height],avgFitness:E,maxFitness:T})})]})]}),Object(A.jsxs)("footer",{children:["Copyright \xa9 2020 AlphaGame |",Object(A.jsx)("a",{href:"https://github.com/Alexduanran/AlphaGame",target:"_blank",style:{textDecoration:"none",color:"white"},children:" Github"})]})]})},Zt=i(460),Jt=i(456),Kt=i(458),qt=i(453),$t=i(454),te=i(455),ee=(i(435),i(436),i(437),i(438),i(439),i.p+"static/media/snake.c6bcedf4.png"),ie="data:image/png;base64,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",Ae=i.p+"static/media/flappybird.31b09d32.png",ne=i.p+"static/media/home2_gif.f51dd1b0.gif",ae=i.p+"static/media/snake_gif.61188676.gif",re=i.p+"static/media/pong_gif.34e92973.gif",se=i.p+"static/media/flappybird_gif.87071256.gif";var oe=function(t){var e=Object(n.useState)(ne),i=Object(c.a)(e,2),a=i[0],r=i[1],s=Object(n.useState)(0),o=Object(c.a)(s,2),l=o[0],h=o[1];function d(){return r(ne),Object(A.jsxs)(Zt.a,{className:u.a.swiperContainer,effect:"coverflow",spaceBetween:30,slidesPerView:3,dynamicBullets:!0,mousewheel:!0,pagination:{clickable:!0},centeredSlides:!0,loop:!0,initialSlide:l,children:[Object(A.jsx)(Jt.a,{children:Object(A.jsx)(f.b,{to:"/snake",children:Object(A.jsx)("div",{className:u.a.square,style:{backgroundImage:"url(".concat(ee,")")}})})}),Object(A.jsx)(Jt.a,{children:Object(A.jsx)(f.b,{to:"/pong",children:Object(A.jsx)("div",{className:u.a.square,style:{backgroundImage:"url(".concat(ie,")")}})})}),Object(A.jsx)(Jt.a,{children:Object(A.jsx)(f.b,{to:"/flappybird",children:Object(A.jsx)("div",{className:u.a.square,style:{backgroundImage:"url(".concat(Ae,")")}})})})]})}function p(e){var i=null;return"snake"===e.name?(r(ae),h(0),i=ee):"pong"===e.name?(r(re),h(1),i=ie):"flappybird"===e.name&&(r(se),h(2),i=Ae),Object(A.jsxs)("div",{className:u.a.grid,children:[Object(A.jsx)("div",{className:u.a.smallpic,style:{backgroundImage:"url(".concat(i,")")}}),Object(A.jsx)("div",{className:u.a.smallsquare,onClick:function(){console.log("/AlphaGame"),t.history.push("/AlphaGame/"+e.name+"/genetic")},children:Object(A.jsx)("h1",{className:u.a.mode,children:"Genetic Algorithm"})}),Object(A.jsx)("div",{className:u.a.smallsquare,onClick:function(){t.history.push("/AlphaGame/"+e.name+"/reinforcement")},children:Object(A.jsx)("h1",{className:u.a.mode,children:"Reinforce- ment Learning"})}),Object(A.jsx)("div",{className:u.a.smallsquare,onClick:function(){t.history.push("/AlphaGame/"+e.name+"/battle")},children:Object(A.jsx)("h1",{className:u.a.mode,children:"Human vs. AI"})})]})}return Kt.a.use([qt.a,$t.a,te.a]),Object(A.jsxs)(f.a,{basename:"/AlphaGame",children:[Object(A.jsxs)("div",{className:u.a.container,children:[Object(A.jsx)("h1",{className:u.a.name,children:Object(A.jsx)(f.b,{to:"/",className:u.a.text,children:"AlphaGame"})}),Object(A.jsx)("div",{className:u.a.background,children:Object(A.jsx)("div",{className:u.a.screen,style:{backgroundImage:"url(".concat(a,")")},children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake",children:Object(A.jsx)(p,{name:"snake"})}),Object(A.jsx)(b.a,{path:"/pong",children:Object(A.jsx)(p,{name:"pong"})}),Object(A.jsx)(b.a,{path:"/flappybird",children:Object(A.jsx)(p,{name:"flappybird"})}),Object(A.jsx)(b.a,{path:"/",children:Object(A.jsx)(d,{className:u.a.swiper})})]})})})]}),Object(A.jsxs)("footer",{children:["Copyright \xa9 2020 AlphaGame |",Object(A.jsx)("a",{href:"https://github.com/Alexduanran/AlphaGame",target:"_blank",style:{textDecoration:"none",color:"white"},children:" Github"})]})]})},le=i(135),ce=i.n(le),he=function(){function t(e,i,A,n,a,r,s){Object(M.a)(this,t),this.direction="U",this.length=1,this.x=e,this.y=i,this.length=A,this.direction=n,this.boxSize=a,this.board_x=r,this.board_y=s,this.body=[],this.initialize(),this.head=this.body[0]}return Object(st.a)(t,[{key:"initialize",value:function(){var t=0,e=0;"R"==this.direction&&(t=-1),"L"==this.direction&&(t=1),"U"==this.direction&&(e=1),"D"==this.direction&&(e=-1);for(var i=0;i<this.length;i++){var A=new ot(this.x+t*i*this.boxSize,this.y+e*i*this.boxSize,this.boxSize,this.boxSize);this.body.push(A)}}},{key:"changeDirection",value:function(t){var e=["U","R","D","L"],i=e.indexOf(this.direction);t!=(i+2)%4&&t!=i&&(this.direction=e[t])}},{key:"addHead",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=0,i=0;"R"==this.direction&&(e=1),"L"==this.direction&&(e=-1),"U"==this.direction&&(i=-1),"D"==this.direction&&(i=1),t?(this.x=this.x+e*this.boxSize,this.y=this.y+i*this.boxSize):(this.x=(this.x+e*this.boxSize)%this.board_x,this.y=(this.y+i*this.boxSize)%this.board_y);var A=new ot(this.x,this.y,this.boxSize,this.boxSize);this.body.unshift(A),this.head=this.body[0]}},{key:"deleteTail",value:function(){return this.body.pop()}},{key:"addTail",value:function(t){this.body.push(t)}},{key:"collideWithBody",value:function(){for(var t=1;t<this.body.length;t++){var e=this.body[t];if(this.head.collideRect(e))return!0}return!1}},{key:"collideWithWall",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=new ot(0,0,this.board_x,this.board_y);if(!i.contains([this.x,this.y]))return!0;if(null==e)return!1;var A=!1;return e.forEach((function(e){t.head.collideRect(e)&&(A=!0)})),A}},{key:"addHead_snakeTwo",value:function(t,e){return null}},{key:"draw",value:function(t){t.fill("#7ffc03");for(var e=0;e<this.body.length;e++){var i=this.body[e];t.rect(i.x,i.y,this.boxSize,this.boxSize)}}}]),t}(),ue=function(){function t(e,i,A,n,a){Object(M.a)(this,t),this.boxLength=e,this.x=i,this.y=A,this.board_x=n,this.board_y=a,this.rect=new ot(this.x,this.y,this.boxLength,this.boxLength)}return Object(st.a)(t,[{key:"move",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=function(t,e){return ht(t,e)};;){var i=ct(0,this.board_x,this.boxLength),A=ct(0,this.board_y,this.boxLength),n=ut(t,[i,A],e);if(null==t||!n)break}this.rect=new ot(i,A,this.boxLength,this.boxLength),this.x=i,this.y=A}},{key:"draw",value:function(t){t.fill("#ff0000"),t.rect(this.x,this.y,this.boxLength,this.boxLength)}}]),t}(),de=function(){function t(e){for(var i in Object(M.a)(this,t),this.FPS=10,this.snakeLength=3,this.collideWall=!0,this.collideBody=!0,this.extraWalls=null,this.manual=!0,this.stateType="12bool",this.rewardType="eat-die-close-away",this.rewardValues={eat:10,die:-100,closer:1,away:-1},e)"collideWall"==i&&(this.collideWall=e[i]),"collideBody"==i&&(this.collideBody=e[i]),"extraWalls"==i&&(this.extraWalls=e[i]),"FPS"==i&&(this.FPS=e[i]),"stateType"==i&&(this.stateType=e[i]),"rewardType"==i&&(this.rewardType=e[i]),"rewardValues"==i&&(this.rewardValues=e[i]),"snakeLength"==i&&(this.snakeLength=e[i]),"manual"==i&&(this.manual=e[i]);this.dpr=1,this.gridSize=e.gridSize*this.dpr,this.width=e.width*this.gridSize,this.height=e.height*this.gridSize,this.extraWalls=function(t,e,i){if(null==t)return null;var A=[];return t.forEach((function(t,n){var a=Object(c.a)(t,2),r=a[0],s=a[1];i&&(r*=e,s*=e),A.push(new ot(r,s,e,e))})),A}(this.extraWalls,this.gridSize,!0),this.timer=null,this.snake=null,this.apple=null,this.done=0,this.score=0,this.best_score=0,this.key_pressed=0,this.reset(),this.manual&&this.keyboard_events(),this.last_snake=null,this.last_apple=null,this.rewardMeasures={eat:0,closer:0,away:0}}return Object(st.a)(t,[{key:"_direction",value:function(t){return["U","R","D","L"][t]}},{key:"_action",value:function(t){return["U","R","D","L"].indexOf(t)}},{key:"update_state",value:function(){if("12bool"==this.stateType)return this.update_state_12bool()}},{key:"update_state_12bool",value:function(){var t=Array(12).fill(0);"U"==this.snake.direction?t[0]=1:"R"==this.snake.direction?t[1]=1:"D"==this.snake.direction?t[2]=1:"L"==this.snake.direction&&(t[3]=1),this.apple.y<this.snake.y&&(t[4]=1),this.apple.x>this.snake.x&&(t[5]=1),this.apple.y>this.snake.y&&(t[6]=1),this.apple.x<this.snake.x&&(t[7]=1);var e={U:{oppo:"D",x:0,y:-this.gridSize,state:8},R:{oppo:"L",x:this.gridSize,y:0,state:9},D:{oppo:"U",x:0,y:this.gridSize,state:10},L:{oppo:"R",x:-this.gridSize,y:0,state:11}};for(var i in e){var A=e[i];this.snake.direction!=A.oppo&&new he(this.snake.x+A.x,this.snake.y+A.y,1,"U",this.gridSize,this.width,this.height).collideWithWall(this.extraWalls)&&(t[A.state]=1)}return Pt.d(t,[1,12])}},{key:"reward",value:function(){if("eat-die-close-away"==this.rewardType)return this.reward_basic()}},{key:"reward_basic",value:function(){var t=this.rewardValues,e=this.rewardMeasures;return this.done?t.die:e.eat?t.eat:e.closer?t.closer:e.away?t.away:0}},{key:"clear_reward",value:function(){for(var t in this.rewardMeasures)this.rewardMeasures[t]=0}},{key:"reset",value:function(){var t,e,i,A;this.done=0,this.score=0;var n=function(t,e){return ht(t,e)};for(i=null==this.extraWalls?null:this.extraWalls.map((function(t){return[t.x,t.y]}));A=ut(i,[t=ct(5*this.gridSize,this.width-5*this.gridSize,this.gridSize),e=ct(5*this.gridSize,this.width-5*this.gridSize,this.gridSize)],n),console.log(A),null!=i&&A;);return this.snake=new he(t,e,this.snakeLength,this._direction(ct(0,4)),this.gridSize,this.width,this.height),this.apple=new ue(this.gridSize,0,0,this.width,this.height),this.move_apple(),this.manual&&(clearInterval(this.timer),this.manual_play()),this.update_state()}},{key:"move_apple",value:function(){var t=this.snake.body.map((function(t){return[t.x,t.y]}));if(null!=this.extraWalls){var e=this.extraWalls.map((function(t){return[t.x,t.y]}));t=t.concat(e)}this.apple.move(t)}},{key:"update_score",value:function(){return this.score=this.snake.body.length()-this.snakeLength,this.score}},{key:"render",value:function(){var t=this,e=this.canvas.context;e.clearRect(0,0,this.width,this.height),this.snake.body.forEach((function(i,A){i.draw(e,t.snakeSprite)})),null!=this.extraWalls&&this.extraWalls.forEach((function(i,A){i.draw(e,t.wallSprite)})),this.apple.rect.draw(e,this.appleSprite)}},{key:"manual_play",value:function(){var t=this;this.timer=setInterval((function(){t.step(),t.key_pressed=0}),1e3/this.FPS)}},{key:"end_game",value:function(){this.done=1,this.manual&&(clearInterval(this.timer),console.log("You DIED!"))}},{key:"step",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.done)return this.manual||null==e||(this.snake.changeDirection(e),this.last_snake=this.snake.head,this.last_apple=this.apple.rect),this.snake.addHead(this.collideWall),this.snake.collideWithWall(this.extraWalls)?this.end_game():t=this.snake.deleteTail(),this.snake.collideWithBody()&&this.end_game(),this.snake.head.collideRect(this.apple.rect)&&(this.snake.addTail(t),this.move_apple(),this.score+=1,this.score>this.best_score&&(this.best_score=this.score)),this.manual?null:this.conclude_step()}},{key:"conclude_step",value:function(){this.rewardMeasures.eat=!ht([this.last_apple.x,this.last_apple.y],[this.apple.rect.x,this.apple.rect.y]);var t=dt([this.last_snake.x,this.last_snake.y],[this.last_apple.x,this.last_apple.y]),e=dt([this.snake.head.x,this.snake.head.y],[this.apple.rect.x,this.apple.rect.y]);this.rewardMeasures.closer=e<t,this.rewardMeasures.away=e>t;var i=this.update_state(),A=this.reward();return this.clear_reward(),[i,A,this.done,this.score]}},{key:"keyboard_events",value:function(){var t=this;document.body.addEventListener("keydown",(function(e){if(t.done)return console.log("Game ended"),null;if(t.key_pressed)return console.log("key pressed in this round"),null;t.key_pressed=1;var i=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].indexOf(e.key);t.snake.changeDirection(i)}))}}]),t}(),pe=i(5),ge=i.n(pe),fe=i(13),be=i(117),ve=function(t){Object(T.a)(i,t);var e=Object(G.a)(i);function i(t){var A;return Object(M.a)(this,i),(A=e.call(this)).maxlen=t,A}return Object(st.a)(i,[{key:"pushDeque",value:function(t){this.length>=this.maxlen&&this.shift(),this.push(t)}}]),i}(Object(be.a)(Array)),me=function(){function t(e){for(var i in Object(M.a)(this,t),this.state_size=e.state_size,this.action_size=e.action_size,this.gamma=.95,this.epsilon=1,this.epsilon_decay=.995,this.epsilon_min=.01,this.learning_rate=25e-5,e)"gamma"==i&&(this.gamma=e[i]),"epsilon"==i&&(this.epsilon=e[i]),"epsilon_decay"==i&&(this.epsilon_decay=e[i]),"epsilon_min"==i&&(this.epsilon_min=e[i]),"learning_rate"==i&&(this.learning_rate=e[i]);this.model=this.build_model();this.memory=new ve(2e3)}return Object(st.a)(t,[{key:"build_model",value:function(){var t=Pt.c();return t.add(Pt.a.dense({units:128,inputShape:[this.state_size],activation:"relu"})),t.add(Pt.a.dense({units:128,activation:"relu"})),t.add(Pt.a.dense({units:128,activation:"relu"})),t.add(Pt.a.dense({units:this.action_size,action:"linear"})),t.compile({optimizer:Pt.e.adam({learningRate:this.learning_rate}),loss:"meanSquaredError"}),t}},{key:"remember",value:function(t,e,i,A,n){this.memory.pushDeque([t,e,i,A,n])}},{key:"act",value:function(){var t=Object(fe.a)(ge.a.mark((function t(e){var i;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Math.random()<=this.epsilon)){t.next=4;break}i=ct(0,this.action_size),t.next=7;break;case 4:return t.next=6,this.exploit(e);case 6:i=t.sent;case 7:return t.abrupt("return",new Promise((function(t,e){t(i)})));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"exploit",value:function(){var t=Object(fe.a)(ge.a.mark((function t(e){var i,A;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.model.predict(e).reshape([this.action_size]);case 2:return i=t.sent,t.next=5,i.argMax().data();case 5:return A=t.sent,t.abrupt("return",new Promise((function(t,e){t(A[0])})));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"replay",value:function(){var t=Object(fe.a)(ge.a.mark((function t(){var e,i,A,n,a,r,s,o,l,h,u,d,p=arguments;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:32,!(this.memory.length<e)){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:i=pt(this.memory,e),A=0;case 5:if(!(A<i.length)){t.next=24;break}if(A%100==0&&console.log(A),n=Object(c.a)(i[A],5),a=n[0],r=n[1],s=n[2],o=n[3],l=n[4],h=s,l){t.next=14;break}return t.next=12,this.model.predict(o).reshape([this.action_size]);case 12:u=t.sent,h=s+this.gamma*u.max().dataSync()[0];case 14:return t.next=16,this.model.predict(a).reshape([this.action_size]);case 16:return d=t.sent,t.next=19,d.data().then((function(t){return t[r]=h}));case 19:return t.next=21,this.model.fit(a,d.reshape([1,this.action_size]),{epochs:1});case 21:A++,t.next=5;break;case 24:return this.epsilon>this.epsilon_min&&(this.epsilon*=this.epsilon_decay),t.abrupt("return",new Promise((function(t,e){t()})));case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"save_model",value:function(){var t=Object(fe.a)(ge.a.mark((function t(e){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.model.save("downloads://"+e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"load_model",value:function(){var t=Object(fe.a)(ge.a.mark((function t(e){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pt.b("localstorage://"+e);case 2:this.model=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),ye=[["episode","score","moves","cumulative reward"]];function xe(t,e){return je.apply(this,arguments)}function je(){return(je=Object(fe.a)(ge.a.mark((function t(e,i){var A,n,a,r,s,o,l,h,u,d,p,g,f,b,v,m,y,x,j=arguments;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A=j.length>2&&void 0!==j[2]?j[2]:{batch_size:32,n_episodes:50,max_moves:500,last_episode:0,exp_replay:!0},n=A.batch_size,a=A.n_episodes,r=A.max_moves,s=A.last_episode,o=A.exp_replay,l=0,h=1;case 8:if(!(h<=a)){t.next=38;break}u=e.reset(),d=0,p=1;case 12:if(!(p<=r)){t.next=31;break}return t.next=15,i.act(u);case 15:if(g=t.sent,f=e.step(g),b=Object(c.a)(f,4),v=b[0],m=b[1],l=b[2],y=b[3],i.remember(u,g,m,v,l),u=v,d+=m,!o){t.next=23;break}return t.next=23,i.replay(n);case 23:if(!l){t.next=28;break}if(o){t.next=27;break}return t.next=27,i.replay(n);case 27:return t.abrupt("break",31);case 28:p++,t.next=12;break;case 31:x="progress: {}/{}, score: {}, e: {}, moves: {}/{}",console.log(x.format(h,a,y,i.epsilon,p,r)),ye.push([h+s,y,p,d]);case 35:h++,t.next=8;break;case 38:return console.log("Training Ended."),t.abrupt("return",new Promise((function(t,e){t(ye)})));case 40:case"end":return t.stop()}}),t)})))).apply(this,arguments)}i(440);for(var _e=[],we=10;we<=11;we++)for(var Oe=6;Oe<=15;Oe++)_e.push([Oe,we]);new lt("image/skin_1.png"),new lt("image/star.png"),new lt("image/tile.png");var Se=function(t){var e=t.dimension[0],i=t.dimension[1],n=Math.min(Math.floor(e/20),Math.floor(i/20)),a=Math.min(e,i),r=Math.round(.06*a),s=Math.round(.05*e),o=Math.round(.9*a),l=Math.round(.1*a),c={width:20,height:20,gridSize:n,FPS:3,snakeLength:1,extraWalls:_e,stateType:"12bool",rewardType:"basic",manual:t.doManual},h=new de(c),u=new me({state_size:12,action_size:4});return t.doTest?null:Object(A.jsx)("div",{id:"snake_div",children:Object(A.jsx)(Q.a,{setup:function(A,n){if(A.createCanvas(a,a).parent(n).position((e-a)/2,(i-a)/2),t.doTrain){xe(h,u,{batch_size:512,n_episodes:100,max_moves:1e3,last_episode:0,exp_replay:!0})}},draw:function(t){t.background(220),t.stroke(0,0,0),h.snake.draw(t),h.apple.draw(t),t.stroke(0,0,0),t.fill("#999999");for(var e=0;e<h.extraWalls.length;e++){var i=h.extraWalls[e];t.rect(i.x,i.y,h.gridSize,h.gridSize)}t.stroke(255,0,0),t.fill(255,0,0,200),t.ellipse(o,l,s,s),t.mouseClicked=function(){dt([t.mouseX,t.mouseY],[o,l])<=.8*s&&h.reset()},t.stroke(0,0,0,0),t.fill("#000000"),t.textSize(r),t.text("Score: "+h.score,.5*r,r),t.text("Best Score: "+h.best_score,.5*r,2*r)}})})};var ke=function(t){var e=Object(n.useRef)(null),i=Object(n.useRef)(null),a=Object(n.useState)({width:0,height:0}),r=Object(c.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)({width:0,height:0}),h=Object(c.a)(l,2),u=(h[0],h[1]);return Object(n.useEffect)((function(){e.current&&o({width:e.current.offsetWidth,height:e.current.offsetHeight}),i.current&&u({width:i.current.offsetWidth,height:i.current.offsetHeight})}),[e,i]),Object(A.jsxs)(f.a,{basename:"/AlphaGame",children:[Object(A.jsxs)("div",{className:ce.a.container,children:[Object(A.jsx)("h1",{className:ce.a.name,onClick:function(){t.history.push("/AlphaGame/")},children:Object(A.jsx)(f.b,{to:"/",className:ce.a.text,children:"AlphaGame"})}),Object(A.jsxs)("div",{className:ce.a.background,children:[Object(A.jsx)("div",{className:ce.a.gameScreen,ref:e,children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake",children:0===s.width?Object(A.jsx)("div",{}):Object(A.jsx)(Se,{doManual:!1,doTrain:!0,doTest:!1,dimension:[s.width,s.height]})}),Object(A.jsx)(b.a,{path:"/pong",children:"pong"}),Object(A.jsx)(b.a,{path:"/flappybird",children:"flappybird"})]})}),Object(A.jsx)("div",{className:ce.a.plotScreen,ref:i,children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake",children:"snake"}),Object(A.jsx)(b.a,{path:"/pong",children:"pong"}),Object(A.jsx)(b.a,{path:"/flappybird",children:"flappybird"})]})})]})]}),Object(A.jsxs)("footer",{children:["Copyright \xa9 2020 AlphaGame |",Object(A.jsx)("a",{href:"https://github.com/Alexduanran/AlphaGame",target:"_blank",style:{textDecoration:"none",color:"white"},children:" Github"})]})]})},Ce=i(136),Be=i.n(Ce);var Ee=function(t){return Object(A.jsxs)(f.a,{basename:"/AlphaGame",children:[Object(A.jsxs)("div",{className:Be.a.container,children:[Object(A.jsx)("h1",{className:Be.a.name,onClick:function(){t.history.push("/AlphaGame/")},children:Object(A.jsx)(f.b,{to:"/",className:Be.a.text,children:"AlphaGame"})}),Object(A.jsxs)("div",{className:Be.a.background,children:[Object(A.jsx)("div",{className:Be.a.gameScreen,children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake",children:"snake"}),Object(A.jsx)(b.a,{path:"/pong",children:"pong"}),Object(A.jsx)(b.a,{path:"/flappybird",children:"flappybird"})]})}),Object(A.jsx)("div",{className:Be.a.plotScreen,children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/snake"}),Object(A.jsx)(b.a,{path:"/pong",children:"pong"}),Object(A.jsx)(b.a,{path:"/flappybird",children:"flappybird"})]})})]})]}),Object(A.jsxs)("footer",{children:["Copyright \xa9 2020 AlphaGame |",Object(A.jsx)("a",{href:"https://github.com/Alexduanran/AlphaGame",target:"_blank",style:{textDecoration:"none",color:"white"},children:" Github"})]})]})},Ie=i(81),Qe=(i(441),Object(Ie.a)());var Me=function(){return Object(A.jsx)("div",{className:l.a.background,children:Object(A.jsx)(b.b,{history:Qe,basename:"/AlphaGame",children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{path:"/*/genetic",children:Object(A.jsx)(Vt,{history:Qe})}),Object(A.jsx)(b.a,{path:"/*/reinforcement",children:Object(A.jsx)(ke,{history:Qe})}),Object(A.jsx)(b.a,{path:"*/battle",children:Object(A.jsx)(Ee,{history:Qe})}),Object(A.jsx)(b.a,{path:"/",children:Object(A.jsx)(oe,{history:Qe})})]})})})},Te=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,462)).then((function(e){var i=e.getCLS,A=e.getFID,n=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),A(t),n(t),a(t),r(t)}))};s.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(Me,{})}),document.getElementById("root")),Te()},68:function(t,e,i){t.exports={background:"Home_background__3HbSX",container:"Home_container__-DMjm",grid:"Home_grid__33I0i",mode:"Home_mode__2BOJe",name:"Home_name__10Kwj",smallpic:"Home_smallpic__3N7EV",smallsquare:"Home_smallsquare__1oBA_",screen:"Home_screen__3rdgN",square:"Home_square__l604N",swiper:"Home_swiper__33oto",swiperContainer:"Home_swiperContainer__1LfR4",text:"Home_text__3zRIA"}}},[[442,1,2]]]);
//# sourceMappingURL=main.363d7ba2.chunk.js.map